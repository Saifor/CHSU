<!doctype html public "-//W3C//DTD HTML 3.2//RU">
<html>
<head>
   <title>Процедура нормализации</title>
   
   
   
   
   
		    <style type="text/css">
TH.arial { font-family: Arial, Serif;}
P.topic { font-family: sans-serif;}
A.plain { text-decoration: none;}
A.topic01 { color: #006890;
font-family: sans-serif;
text-decoration: none;}
A.topic02 { color: #099771;
font-family: sans-serif;
text-decoration: none;}
A.topic03 { color: #719709;
font-family: sans-serif;
text-decoration: none;}
A.topic04 { color: #98650A;
font-family: sans-serif;
text-decoration: none;}
A.topic05 { color: #98340A;
font-family: sans-serif;
text-decoration: none;}
A.topic06 { color: #099607;
font-family: sans-serif;
text-decoration: none;}
A.topic07 { color: #9E1215;
font-family: sans-serif;
text-decoration: none;}
A.topic08 { color: #970941;
font-family: sans-serif;
text-decoration: none;}
A.topic09 { color: #950995;
font-family: sans-serif;
text-decoration: none;}
A.topic010 { color: #390A98;
font-family: sans-serif;
text-decoration: none;}
H1 { font-family: sans-serif;}
H2 { font-family: sans-serif;}
H3 { font-family: sans-serif;}
H4 { font-family: sans-serif;}
H5 { font-family: sans-serif;}
H6 { font-family: sans-serif;}
</style>
</head>
<body bgcolor="#FFFFFF" link="#006890" vlink="#003860" alink="#800000" text="#000000">
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/header0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<img src="_pic_/logo.gif" width=157 height=53 border=0 alt="Server for Information Technologies">
</td><td align="right">
<font size="-2">Сервер поддерживается<br><a class="plain" href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>(095) 932-9212, 932-9213, 939-0783<br>E-mail: <a class=noneline href="mailto:info@citmgu.ru?Subject='From page topic CIT FORUM local copy'">info@citforum.ru</a></font>
</td></tr>
</table>
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="left">
<font size="-1">Сервер содержит море(!) аналитической информации</font>
</td><td align="right">
<font size="-1">CIT Forum CD-ROM</font>
</td></tr>
</table>
</td></tr>
</table>
<h4>4.6. Процедура нормализации</h4>
<p align="justify">Как уже говорилось, нормализация – это разбиение таблицы на несколько, обладающих лучшими свойствами при обновлении, включении и удалении данных. Теперь можно дать и другое определение: нормализация – это процесс последовательной замены таблицы ее полными декомпозициями до тех пор, пока все они не будут находиться в 5НФ. На практике же достаточно привести таблицы к НФБК и с большой гарантией считать, что они находятся в 5НФ. Разумеется, этот факт нуждается в проверке, однако пока не существует эффективного алгоритма такой проверки. Поэтому остановимся лишь на процедуре приведения таблиц к НФБК. </p>
<p align="justify">Эта процедура основывается на том, что единственными функциональными зависимостями в любой таблице должны быть зависимости вида K->F, где K – первичный ключ, а F – некоторое другое поле. Заметим, что это следует из определения первичного ключа таблицы, в соответствии с которым K->F всегда имеет место для всех полей данной таблицы. "Один факт в одном месте" говорит о том, что не имеют силы никакие другие функциональные зависимости. Цель нормализации состоит именно в том, чтобы избавиться от всех этих "других" функциональных зависимостей, т.е. таких, которые имеют иной вид, чем K->F.</p>
<p align="justify">Если воспользоваться рекомендацией п. <a href="4-5.htm">4.5</a> и подменить на время нормализации коды первичных (внешних) ключей на исходные ключи, то, по существу, следует рассмотреть лишь два случая: </p>
<p align="justify">1. Таблица имеет составной первичный ключ вида, скажем, (К1,К2), и включает также поле F, которое функционально зависит от части этого ключа, например, от К2, но не от полного ключа. В этом случае рекомендуется сформировать другую таблицу, содержащую К2 и F (первичный ключ – К2), и удалить F из первоначальной таблицы:</p>
<pre>
Заменить T(K1,K2,F),  первичный ключ (К1,К2), ФЗ К2->F
 на      T1(K1,K2),   первичный ключ (К1,К2),
 и       T2(K2,F),    первичный ключ К2.
</pre>
<p align="justify">2. Таблица имеет первичный (возможный) ключ К, не являющееся возможным ключом поле F1, которое, конечно, функционально зависит от К, и другое неключевое поле F2, которое функционально зависит от F1. Решение здесь, по существу, то же самое, что и прежде – формируется другая таблица, содержащая F1 и F2, с первичным ключом F1, и F2 удаляется из первоначальной таблицы:</p>
<pre>
Заменить T(K,F1,F2),  первичный ключ К, ФЗ F1->F2
 на      T1(K,F1),    первичный ключ К,
 и       T2(F1,F2),   первичный ключ F1.
</pre>
<p align="justify">Для любой заданной таблицы, повторяя применение двух рассмотренных правил, почти во всех практических ситуациях можно получить в конечном счете множество таблиц, которые находятся в "окончательной" нормальной форме и, таким образом, не содержат каких-либо функциональных зависимостей вида, отличного от K->F. </p>
<p align="justify">Для выполнения этих операций необходимо первоначально иметь в качестве входных данных какие-либо "большие" таблицы (например, универсальные отношения). Но нормализация ничего не говорит о том, как получить эти большие таблицы. В следующей главе будет рассмотрена процедура получения таких исходных таблиц, а здесь приведем примеры нормализации.</p>
<a name="ex4-1"></a>
<p align="justify"><b>Пример 4.1</b>. Применим рассмотренные правила для полной нормализации универсального отношения "Питание" (рис. <a href="4-2.htm#pic4-2">4.2</a>).</p>
<p align="justify"><u>Шаг 1</u>. Определение первичного ключа таблицы. </p>
<p align="justify">Предположим, что каждое блюдо имеет уникальное название, относится к единственному виду и приготавливается по единственному рецепту, т.е. название блюда однозначно определяет его вид и рецепт. Предположим также, что название организации поставщика уникально для того города, в котором он расположен, и названия городов уникальны для каждой из стран, т.е. название поставщика и город однозначно определяют этого поставщика, а город – страну его нахождения. Наконец, предположим, что поставщик может осуществлять в один и тот же день только одну поставку каждого продукта, т.е. название продукта, название организации поставщика, город и дата поставки однозначно определяют вес и цену поставленного продукта. Тогда в качестве первичного ключа отношения "Питание" можно использовать следующий набор атрибутов:</p>
<pre> 
Блюдо, Дата_Р, Продукт, Поставщик, Город, Дата_П.
</pre>
<p align="justify"><u>Шаг 2</u>. Выявление полей, функционально зависящих от части состваного ключа.</p>
<p align="justify">Поле Вид функционально зависит только от поля Блюдо, т.е.</p>
<pre>
Блюдо->Вид.
</pre>
<p align="justify">Аналогичным образом можно получить зависимости:</p>
<pre>
Блюдо->Рецепт
(Блюдо, Дата_Р)->Порций
Продукт->Калорийность
(Блюдо, Продукт)->Вес
Город->Страна
(Поставщик, Город, Дата_П)->Цена	
</pre>
<p align="justify"><u>Шаг 3</u>. Формирование новых таблиц.</p>
<p align="justify">Полученные функциональные зависимости опредляют состав таблиц, которые можно сформировать из данных универсального отношения:</p>
<pre>
Блюда (<u>Блюдо</u>, Вид)
Рецепты (<u>Блюдо</u>, Рецепт)
Расход (<u>Блюдо, Дата_Р</u>, Порций)
Продукты (<u>Продукт</u>, Калорийность)
Состав (<u>Блюдо, Продукт</u>, Вес (г))
Города (<u>Город</u>, Страна)
Поставки (<u>Поставщик, Город, Дата_П</u>, Вес (кг), Цена).
</pre>
<p align="justify"><u>Шаг 4</u>. Корректировка исходной таблицы.</p>
<p align="justify">После выделения из состава универсального отношения указанных выше таблиц, там остались лишь сведения о поставщиках, для хранения которых целесообразно создать таблицу </p>
<pre>
Поставщики (<u>Поставщик, Город</u>),
</pre>
<p align="justify">т.е. использовать часть исходного первичного ключа, так как остальные его части уже ничего не определяют. </p>
<p align="justify">Таким образом, процедура последовательной нормализации позволила получить проект, лучший, чем приведен на рис. <a href="4-3.htm#pic4-3">4.3</a>.</p>
<a name="ex4-2"></a>
<p align="justify"><b>Пример 4.2</b>. Для улучшения проекта, приведенного на рис. <a href="4-3.htm#pic4-4">4.4</a>, нужно определить первичные ключи таблиц и выявить, нет ли в таблицах полей, зависящих лишь от части этих ключей. Такое поле есть только в одной таблице. Это поле Страна в таблице Поставщики. Выделяя его вместе с ключем Город в таблицу Страны, получим проект, приведенный на рис. <a href="3-2.htm#pic3-2">3.2</a>.</p>
<p align="center">
<font size=-1>
[<a href="4-5.htm">Назад</a>] [<a href="index.htm">Содержание</a>] [<a href="4-7.htm">Вперед</a>]
</font>
</p>
<table cellspacing=0 cellpadding=0 border=0 background="_pic_/footer0.jpg" width="100%">
<tr><td align="center">
<table cellspacing=0 cellpadding=4 border=0 width="100%" background="">
<tr><td align="right" valign="top" width="33%">
<font size="-2">Comments: <a class="plain" href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM local copy'">info@citmgu.ru</a><br>
Designed by <a class="plain" href="mailto:andrey@novikov.com">Andrey Novikov</a><br>
Copyright &copy; <a class="plain" href="http://www.citmgu.ru/">CIT</a></font>
</td></tr>
</table>
</td></tr>
</table>
</body>
</html>