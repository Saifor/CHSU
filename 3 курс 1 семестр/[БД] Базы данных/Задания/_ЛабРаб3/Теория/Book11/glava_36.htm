<html>
<head>
<title>8.5. Общий подход к организации представлений, ограничениям целостности и контролю доступа</title>
		    <style type="text/css">
A.noneline { font-family: Arial, Serif; text-decoration: none; }
FONT.arial { font-family: Arial, Serif; }
TD.arial   { font-family: Arial, Serif; }
TH.arial   { font-family: Arial, Serif; }
PRE        { font-family: Monospace; color: navy; }
SAMP       { font-family: Monospace; color: navy; }
TT         { font-family: Monospace; color: navy; }
VAR        { font-family: Monospace; color: navy; }
</style>
</head>
<body bgcolor="#FFF5EE" text="#000000" link="#FF0000" alink="#FF0000" vlink="#A52A2A">
<basefont size="3">
<center>
<table width=100% border=0 cellpadding=0>
<tr valign=top><td class=arial><a href="http://www.citforum.ru/"><img height=50 width=150 src="_pic_/logo3D.gif" alt="Server for Information Technologies" border=0></a><br>
</td>
<td align=right class=arial>
<font size="-2">
Сервер поддерживается<br>
<a class=noneline href="http://www.citmgu.ru">Центром Информационных Технологий</a><br>
(095) 932-9212, 932-9213, 939-0783<br>
E-mail: <a class=noneline href="mailto:info@citforum.ru?Subject='From page topic CIT-FORUM'">info@citforum.ru</a></font>
</tr>
<tr>
<th colspan=2 class=arial>
<font color=#000080 size=2><a href="http://www.citforum.ru" class=noneline>Сервер Информационных Технологий</a> содержит море(!) аналитической информации</font>
<hr noshade>
</th>
</tr>
</table>
</center>
<h4><a name="_3_2_5">8.5. Общий подход к организации представлений, ограничениям целостности и контролю доступа</a></h4>
<p>
Мы объединили эти три кажущиеся не очень близкими темы, потому что в Ingres для решения соответствующих проблем применяется единый подход, основанный на модификации операторов SQL. Начнем с представлений. Как и в System R (точнее, в языке SQL), представление базы данных - это некоторый именованный запрос с именованными полями результирующего отношения.
<p>
Например, оператор
<pre>DEFINE VIEW GROUP310
    (STUD_NUMBER = S.STUD_NUMBER,
     STUD_NAME = S.STUD_NAME,
     STUD_STATUS = S.STUD_STATUS)
WHERE (S.GROUP_NUMBER = 310)</pre>
<p>
определяет представляемое отношение, включающее номера студенческих билетов и имена студентов из группы 310.
<p>
Предположим, что мы хотим теперь найти неуспевающих студентов в отношении GROUP310:
<pre>RANGE OF G310 IS GROUP310
RETRIEVE (G310.STUD_NAME)
WHERE (G310.STUD_STATUS = &quot;NO&quot;)</pre>
<p>
Тогда после модификации этот запрос будет выглядеть следующим образом:
<pre>RETRIEVE (STUD_NUMBER = S.STUD_NUMBER, STUD_NAME =
          S.STUD_NAME, STUD_STATUS = S.STUD_STATUS)
WHERE (S.GROUP_NUMBER = 310 AND
       S.STUD_STATUS = &quot;NO&quot;)</pre>
<p>
На тех же самых принципах построен контроль доступа к данным и контроль целостности баз данных. Например, ограничение доступа к отношению СТУДЕНТЫ может быть определено следующим образом:
<pre>DEFINE PERMIT RETRIEVE, REPLACE
       ON     S
       TO     PETROV
       AT     TTA5
       FROM   9:00 TO 17:50
       ON     MON TO FRI
       WHERE  (S.GROUP_NUMBER = 310)</pre>
<p>
Это означает, что Петрову разрешается читать и модифицировать отношение СТУДЕНТЫ с терминала TTA5 во время от 9 до 15:00 в рабочие дни недели, причем только те кортежи, которые удовлетворяют сформулированному условию. При компиляции любого оператора QUEL над отношением СТУДЕНТЫ этот оператор будет модифицироваться таким образом, чтобы он был выполнен при выполнении условий хотя бы одного из ограничений доступа.
<p>
Аналогично, если для отношения СТУДЕНТЫ определено ограничение целостности
<pre>DEFINE INTEGRITY
    ON     S
    WHERE  (S.STUD_STIP &lt; 150,000)</pre>
<p>
то к условию любого оператора изменения кортежей отношения СТУДЕНТЫ будет через AND добавляться условия всех ограничений целостности, определенных для этого отношения.
<p>
В заключение этой лекции заметим, что конечно, в Ingres поддерживается механизм параллельных транзакций с соответствующей синхронизаций доступа и журнализация изменений баз данных. Однако нам не известны какие-либо особенности применяемых механизмов. На особенностях оптимизации операторов QUEL мы остановимся в лекции, посвященной оптимизациям в языках баз данных.
<p>
<p><center><a href="glava_35.htm">Предыдущая глава</a> || <a href="contents.htm">Оглавление</a> || <a href="glava_37.htm">Следующая глава</a><p>
<p></p>
<hr noshade>
<center>
<font size=1 class=arial>
Comments: <a href="mailto:info@citmgu.ru?Subject='From bottom of CIT FORUM'" class=noneline>info@citmgu.ru</a><br>
Copyright &copy; <a href="http://www.citmgu.ru/" class=noneline>CIT</a>
</font></center></body></html>
